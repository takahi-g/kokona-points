<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã“ã“ãªãƒã‚¤ãƒ³ãƒˆ</title>
    <link rel="apple-touch-icon" href="icon3.png">
    <link rel="icon" type="image/png" href="icon3.png">
    <meta name="apple-mobile-web-app-title" content="ã‚³ã‚³ãƒŠï¼">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        body { font-family: sans-serif; text-align: center; background-color: #fff0f5; padding: 20px; }
        .card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        
        /* æ–‡å­—ã‚µã‚¤ã‚ºã‚’æ¨™æº–ï¼ˆæ™®é€šã«èª­ã¿ã‚„ã™ã„å¤§ãã•ï¼‰ã«æˆ»ã—ãŸã‚ˆ */
        h1 { font-size: 22px; color: #ff1493; margin-bottom: 15px; }
        .next-goal { font-size: 18px; color: #e91e63; font-weight: bold; margin-bottom: 20px; background: #ffe4e1; padding: 10px; border-radius: 10px; }
        .point-display { font-size: 50px; color: #ff69b4; font-weight: bold; margin: 15px 0; }
        
        input { padding: 12px; border-radius: 8px; border: 1px solid #ffb6c1; width: 85%; margin-bottom: 10px; font-size: 16px; box-sizing: border-box; }
        button { background: #ff69b4; color: white; border: none; padding: 12px; border-radius: 25px; font-size: 18px; font-weight: bold; cursor: pointer; width: 85%; margin: 5px 0; }
        
        .log { text-align: left; margin-top: 20px; font-size: 15px; color: #555; background: #fffafb; padding: 10px; border-radius: 10px; border: 1px solid #ffd1dc; }
        .log ul { list-style: none; padding: 0; }
        .log li { padding: 8px; border-bottom: 1px dotted #eee; cursor: pointer; }
        .log li:hover { background: #fff0f5; }
        .edit-hint { font-size: 11px; color: #999; margin-bottom: 5px; }
        
        .reset-btn { background: #f0f0f0; color: #999; font-size: 12px; margin-top: 30px; width: auto; padding: 5px 15px; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ã“ã“ãªãƒã‚¤ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰</h1>
        <div class="next-goal" id="next-message">ã‚ã¨ 10 ãƒã‚¤ãƒ³ãƒˆï¼</div>
        <div class="point-display"><span id="points">0</span> pt</div>
        <input type="text" id="memo" placeholder="ãªã«ã‚’ã—ãŸï¼Ÿ">
        <button onclick="addPoint()">ãƒã‚¤ãƒ³ãƒˆGETï¼</button>
        
        <div class="log">
            <strong>ğŸŒ¸ ãŒã‚“ã°ã£ãŸè¨˜éŒ²ï¼š</strong>
            <p class="edit-hint">ï¼ˆã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ç›´ã›ã‚‹ã‚ˆï¼‰</p>
            <ul id="log-list"></ul>
        </div>
        
        <button class="reset-btn" onclick="resetPoints()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

    <script>
        let currentPoints = 0;
        let logs = [];
        const GOAL = 10;

        window.onload = function() {
            const savedPoints = localStorage.getItem('kokonaPoints');
            const savedLogs = localStorage.getItem('kokonaLogs');
            if (savedPoints) {
                currentPoints = parseInt(savedPoints);
                document.getElementById('points').innerText = currentPoints;
            }
            if (savedLogs) {
                logs = JSON.parse(savedLogs);
                updateLogDisplay();
            }
            updateGoalMessage();
        };

        function updateGoalMessage() {
            const msgElement = document.getElementById('next-message');
            const remaining = GOAL - currentPoints;
            if (remaining > 0) {
                msgElement.innerText = "ã‚ã¨ " + remaining + " ãƒã‚¤ãƒ³ãƒˆï¼";
            } else {
                msgElement.innerText = "ğŸ‰ 10ãƒã‚¤ãƒ³ãƒˆé”æˆï¼ ğŸ‰";
            }
        }

        function addPoint() {
            const memoInput = document.getElementById('memo');
            if (memoInput.value === "") { alert("å†…å®¹ã‚’å…¥ã‚Œã¦ã­ï¼"); return; }
            
            currentPoints++;
            document.getElementById('points').innerText = currentPoints;
            
            const now = new Date();
            const timeString = (now.getMonth() + 1) + "/" + now.getDate();
            logs.unshift(timeString + " - " + memoInput.value);
            
            saveData();
            updateLogDisplay();
            updateGoalMessage();
            memoInput.value = "";
            
            if (currentPoints === GOAL) {
                alert("ãŠã‚ã§ã¨ã†ï¼ãƒ‘ãƒ‘ã‹ã‚‰300å††ã‚²ãƒƒãƒˆï¼");
            }
        }

        function editLog(index) {
            const newText = prompt("å†…å®¹ã‚’ãªãŠã™ã‚ˆï¼š", logs[index]);
            if (newText !== null && newText !== "") {
                logs[index] = newText;
                saveData();
                updateLogDisplay();
            }
        }

        function updateLogDisplay() {
            const logList = document.getElementById('log-list');
            logList.innerHTML = "";
            logs.forEach((log, index) => {
                const li = document.createElement('li');
                li.innerText = "âœ¨ " + log;
                li.onclick = function() { editLog(index); };
                logList.appendChild(li);
            });
        }

        function saveData() {
            localStorage.setItem('kokonaPoints', currentPoints);
            localStorage.setItem('kokonaLogs', JSON.stringify(logs));
        }

        function resetPoints() {
            if (confirm("æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¦ã„ã„ï¼Ÿ")) {
                currentPoints = 0;
                logs = [];
                saveData();
                document.getElementById('points').innerText = currentPoints;
                updateLogDisplay();
                updateGoalMessage();
            }
        }
    </script>
</body>
</html>
